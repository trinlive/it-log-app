<div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200 mb-6">
    
    <div class="flex flex-col lg:flex-row gap-3 lg:items-center justify-between">
        
        <div class="flex flex-col sm:flex-row gap-3 flex-grow">
            <div class="relative flex-grow min-w-[200px]">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fa-solid fa-magnifying-glass text-slate-400"></i>
                </div>
                <input type="text" id="searchInput" onkeyup="filterTable(true)" 
                    class="block w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg leading-5 bg-slate-50 placeholder-slate-400 focus:outline-none focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out sm:text-sm" 
                    placeholder="ค้นหา Ticket, รายละเอียด...">
            </div>

            <div class="flex gap-2">
                <input type="date" id="startDateFilter" onchange="filterTable(true)" 
                    class="block w-full sm:w-36 pl-2 pr-2 py-2 border border-slate-300 rounded-lg text-slate-600 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm cursor-pointer"
                    title="วันที่เริ่มต้น">
                <input type="date" id="endDateFilter" onchange="filterTable(true)" 
                    class="block w-full sm:w-36 pl-2 pr-2 py-2 border border-slate-300 rounded-lg text-slate-600 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm cursor-pointer"
                    title="ถึงวันที่">
            </div>
            
            <div class="relative lg:w-48">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fa-solid fa-layer-group text-slate-400"></i>
                </div>
                <select id="categoryFilter" onchange="filterTable(true)" 
                    class="block w-full pl-9 pr-8 py-2 border border-slate-300 rounded-lg leading-5 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm appearance-none cursor-pointer text-slate-600 font-medium">
                    <option value="">ทุกหมวดหมู่</option>
                    <% 
                        let uniqueCats = [...new Set(logs.map(item => (item.category || '').trim()))].filter(Boolean);
                        uniqueCats.sort((a, b) => getCategoryOrder(a) - getCategoryOrder(b));
                        uniqueCats.forEach(cat => { 
                    %>
                        <option value="<%= cat %>"><%= getCategoryLabel(cat) %></option>
                    <% }); %>
                </select>
                <div class="absolute inset-y-0 right-0 pr-2 flex items-center pointer-events-none">
                    <i class="fa-solid fa-chevron-down text-slate-400 text-xs"></i>
                </div>
            </div>
        </div>

        <div class="flex flex-wrap items-center gap-2 justify-end bg-slate-50 p-1.5 rounded-lg border border-slate-200">
            
            <div class="px-3 py-1.5 bg-white border border-slate-200 rounded-md text-xs font-medium text-slate-600 shadow-sm whitespace-nowrap">
                <i class="fa-solid fa-database mr-1 text-slate-400"></i>
                <span id="totalRecordsDisplay">...</span> รายการ
            </div>

            <div id="paginationControls" class="flex items-center"></div>

            <div class="h-6 w-px bg-slate-300 mx-1"></div>

            <div class="flex items-center gap-2 px-2">
                <span class="text-xs text-slate-500 font-medium whitespace-nowrap">
                    แสดง:
                </span>
                <div class="relative">
                    <select id="limitFilter" onchange="filterTable(true)" 
                        class="bg-transparent text-sm font-bold text-slate-700 focus:outline-none cursor-pointer appearance-none pr-4 text-right">
                        <option value="100" selected>100</option>
                        <option value="500">500</option>
                        <option value="1000">1000</option>
                        <option value="all">All</option>
                    </select>
                    <div class="absolute inset-y-0 right-0 flex items-center pointer-events-none">
                        <i class="fa-solid fa-caret-down text-slate-400 text-[10px]"></i>
                    </div>
                </div>
            </div>

            <div class="h-6 w-px bg-slate-300 mx-1"></div>

            <button onclick="clearData()" 
                class="bg-white hover:bg-red-50 text-red-500 border border-slate-300 hover:border-red-400 p-1.5 rounded shadow-sm transition-all duration-200 w-8 h-8 flex items-center justify-center"
                title="ล้างข้อมูลทั้งหมด (Clear Data)">
                <i class="fa-solid fa-trash-can text-sm"></i>
            </button>

            <button onclick="syncData()" 
                class="bg-white hover:bg-blue-600 hover:text-white text-slate-500 border border-slate-300 hover:border-blue-600 p-1.5 rounded shadow-sm transition-all duration-200 group w-8 h-8 flex items-center justify-center"
                title="ดึงข้อมูลล่าสุด (Sync Data)">
                <i class="fa-solid fa-rotate group-hover:animate-spin text-sm"></i>
            </button>

        </div>
    </div>
</div>